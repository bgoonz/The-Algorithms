<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>no-confusing-void-expression</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="requires-expressions-of-type-void-to-appear-in-statement-position-no-confusing-void-expression">Requires expressions of type void to appear in statement position (<code>no-confusing-void-expression</code>)</h1>
<p>Returning the results of an expression whose type is void can be misleading. Attempting to do so is likely a symptom of expecting a different return type from a function. Even if used correctly, it can be misleading for other developers, who don’t know what a particular function does and if its result matters.</p>
<p>This rule provides automatic fixes for most common cases.</p>
<h2 id="examples">Examples</h2>
<p>Examples of <strong>incorrect</strong> code for this rule:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb1-1" title="1"><span class="co">// somebody forgot that `alert` doesn&#39;t return anything</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">const</span> response <span class="op">=</span> <span class="fu">alert</span>(<span class="st">&#39;Are you sure?&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">alert</span>(<span class="st">&#39;Are you sure?&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">// it&#39;s not obvious whether the chained promise will contain the response (fixable)</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="va">promise</span><span class="op">.</span><span class="fu">then</span>(value <span class="kw">=&gt;</span> <span class="bu">window</span><span class="op">.</span><span class="fu">postMessage</span>(value))<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">// it looks like we are returning the result of `console.error` (fixable)</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">function</span> <span class="fu">doSomething</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="fu">if</span> (<span class="op">!</span>somethingToDo) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="cf">return</span> <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;Nothing to do!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Doing a thing...&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>Examples of <strong>correct</strong> code for this rule:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// just a regular void function in a statement position</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="fu">alert</span>(<span class="st">&#39;Hello, world!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">// this function returns a boolean value so it&#39;s ok</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">const</span> response <span class="op">=</span> <span class="fu">confirm</span>(<span class="st">&#39;Are you sure?&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">confirm</span>(<span class="st">&#39;Are you sure?&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">// now it&#39;s obvious that `postMessage` doesn&#39;t return any response</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="va">promise</span><span class="op">.</span><span class="fu">then</span>(value <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="bu">window</span><span class="op">.</span><span class="fu">postMessage</span>(value)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">// now it&#39;s explicit that we want to log the error and return early</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="kw">function</span> <span class="fu">doSomething</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="fu">if</span> (<span class="op">!</span>somethingToDo) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-16" title="16">    <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;Nothing to do!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-17" title="17">    <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-19" title="19"></a>
<a class="sourceLine" id="cb2-20" title="20">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Doing a thing...&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-22" title="22"></a>
<a class="sourceLine" id="cb2-23" title="23"><span class="co">// using logical expressions for their side effects is fine</span></a>
<a class="sourceLine" id="cb2-24" title="24">cond <span class="op">&amp;&amp;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;true&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-25" title="25">cond <span class="op">||</span> <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;false&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-26" title="26">cond <span class="op">?</span> <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;true&#39;</span>) <span class="op">:</span> <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;false&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="options">Options</h2>
<p>An object option can be specified. Each boolean flag makes the rule less strict.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">type</span> Options <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  ignoreArrowShorthand<span class="op">?:</span> <span class="dt">boolean</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3">  ignoreVoidOperator<span class="op">?:</span> <span class="dt">boolean</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="op">};</span></a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">const</span> defaults<span class="op">:</span> Options <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-7" title="7">  ignoreArrowShorthand<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-8" title="8">  ignoreVoidOperator<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="op">};</span></a></code></pre></div>
<h3 id="ignorearrowshorthand"><code>ignoreArrowShorthand</code></h3>
<p><code>false</code> by default.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">&quot;@typescript-eslint/no-confusing-void-expression&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="st">&quot;error&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="fu">{</span> <span class="dt">&quot;ignoreArrowShorthand&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="fu">}</span></a></code></pre></div>
<p>It might be undesirable to wrap every arrow function shorthand expression with braces. Especially when using Prettier formatter, which spreads such code across 3 lines instead of 1.</p>
<p>Examples of additional <strong>correct</strong> code with this option enabled:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">promise</span><span class="op">.</span><span class="fu">then</span>(value <span class="kw">=&gt;</span> <span class="bu">window</span><span class="op">.</span><span class="fu">postMessage</span>(value))<span class="op">;</span></a></code></pre></div>
<h3 id="ignorevoidoperator"><code>ignoreVoidOperator</code></h3>
<p><code>false</code> by default.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">&quot;@typescript-eslint/no-confusing-void-expression&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="st">&quot;error&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="fu">{</span> <span class="dt">&quot;ignoreVoidOperator&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="fu">}</span></a></code></pre></div>
<p>It might be preferable to only use some distinct syntax to explicitly mark the confusing but valid usage of void expressions. This option allows void expressions which are explicitly wrapped in the <code>void</code> operator. This can help avoid confusion among other developers as long as they are made aware of this code style.</p>
<p>This option also changes the automatic fixes for common cases to use the <code>void</code> operator. It also enables a suggestion fix to wrap the void expression with <code>void</code> operator for every problem reported.</p>
<p>Examples of additional <strong>correct</strong> code with this option enabled:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// now it&#39;s obvious that we don&#39;t expect any response</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="va">promise</span><span class="op">.</span><span class="fu">then</span>(value <span class="kw">=&gt;</span> <span class="kw">void</span> <span class="bu">window</span><span class="op">.</span><span class="fu">postMessage</span>(value))<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">// now it&#39;s explicit that we don&#39;t want to return anything</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="kw">function</span> <span class="fu">doSomething</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="fu">if</span> (<span class="op">!</span>somethingToDo) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="cf">return</span> <span class="kw">void</span> <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;Nothing to do!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-9" title="9"></a>
<a class="sourceLine" id="cb7-10" title="10">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Doing a thing...&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb7-12" title="12"></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">// we are sure that we want to always log `undefined`</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="kw">void</span> <span class="fu">alert</span>(<span class="st">&#39;Hello, world!&#39;</span>))<span class="op">;</span></a></code></pre></div>
<h2 id="when-not-to-use-it">When Not To Use It</h2>
<p>The return type of a function can be inspected by going to its definition or hovering over it in an IDE. If you don’t care about being explicit about the void type in actual code then don’t use this rule. Also, if you prefer concise coding style then also don’t use it.</p>
<h2 id="related-to">Related to</h2>
<ul>
<li>TSLint: <a href="https://palantir.github.io/tslint/rules/no-void-expression/">‘no-void-expression’</a></li>
</ul>
</body>
</html>
