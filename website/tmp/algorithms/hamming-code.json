{
  "slug": "hamming-code",
  "name": "Hamming Code",
  "categories": ["hashing"],
  "body": {},
  "implementations": {
    "python": {
      "dir": "hashes/hamming_code.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/hashes/hamming_code.py",
      "code": "<span class=\"hljs-comment\"># Author: João Gustavo A. Amorim &amp; Gabriel Kunz</span>\n<span class=\"hljs-comment\"># Author email: joaogustavoamorim@gmail.com and gabriel-kunz@uergs.edu.br</span>\n<span class=\"hljs-comment\"># Coding date:  apr 2019</span>\n<span class=\"hljs-comment\"># Black: True</span>\n\n<span class=\"hljs-string\">&quot;&quot;&quot;\n    * This code implement the Hamming code:\n        https://en.wikipedia.org/wiki/Hamming_code - In telecommunication,\n    Hamming codes are a family of linear error-correcting codes. Hamming\n    codes can detect up to two-bit errors or correct one-bit errors\n    without detection of uncorrected errors. By contrast, the simple\n    parity code cannot correct errors, and can detect only an odd number\n    of bits in error. Hamming codes are perfect codes, that is, they\n    achieve the highest possible rate for codes with their block length\n    and minimum distance of three.\n\n    * the implemented code consists of:\n        * a function responsible for encoding the message (emitterConverter)\n            * return the encoded message\n        * a function responsible for decoding the message (receptorConverter)\n            * return the decoded message and a ack of data integrity\n\n    * how to use:\n            to be used you must declare how many parity bits (sizePari)\n        you want to include in the message.\n            it is desired (for test purposes) to select a bit to be set\n        as an error. This serves to check whether the code is working correctly.\n            Lastly, the variable of the message/word that must be desired to be\n        encoded (text).\n\n    * how this work:\n            declaration of variables (sizePari, be, text)\n\n            converts the message/word (text) to binary using the\n        text_to_bits function\n            encodes the message using the rules of hamming encoding\n            decodes the message using the rules of hamming encoding\n            print the original message, the encoded message and the\n        decoded message\n\n            forces an error in the coded text variable\n            decodes the message that was forced the error\n            print the original message, the encoded message, the bit changed\n        message and the decoded message\n&quot;&quot;&quot;</span>\n\n<span class=\"hljs-comment\"># Imports</span>\n<span class=\"hljs-keyword\">import</span> numpy <span class=\"hljs-keyword\">as</span> np\n\n\n<span class=\"hljs-comment\"># Functions of binary conversion--------------------------------------</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">text_to_bits</span>(<span class=\"hljs-params\">text, encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>, errors=<span class=\"hljs-string\">&quot;surrogatepass&quot;</span></span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    &gt;&gt;&gt; text_to_bits(&quot;msg&quot;)\n    &#x27;011011010111001101100111&#x27;\n    &quot;&quot;&quot;</span>\n    bits = <span class=\"hljs-built_in\">bin</span>(<span class=\"hljs-built_in\">int</span>.from_bytes(text.encode(encoding, errors), <span class=\"hljs-string\">&quot;big&quot;</span>))[<span class=\"hljs-number\">2</span>:]\n    <span class=\"hljs-keyword\">return</span> bits.zfill(<span class=\"hljs-number\">8</span> * ((<span class=\"hljs-built_in\">len</span>(bits) + <span class=\"hljs-number\">7</span>) // <span class=\"hljs-number\">8</span>))\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">text_from_bits</span>(<span class=\"hljs-params\">bits, encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>, errors=<span class=\"hljs-string\">&quot;surrogatepass&quot;</span></span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    &gt;&gt;&gt; text_from_bits(&#x27;011011010111001101100111&#x27;)\n    &#x27;msg&#x27;\n    &quot;&quot;&quot;</span>\n    n = <span class=\"hljs-built_in\">int</span>(bits, <span class=\"hljs-number\">2</span>)\n    <span class=\"hljs-keyword\">return</span> n.to_bytes((n.bit_length() + <span class=\"hljs-number\">7</span>) // <span class=\"hljs-number\">8</span>, <span class=\"hljs-string\">&quot;big&quot;</span>).decode(encoding, errors) <span class=\"hljs-keyword\">or</span> <span class=\"hljs-string\">&quot;\\0&quot;</span>\n\n\n<span class=\"hljs-comment\"># Functions of hamming code-------------------------------------------</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">emitterConverter</span>(<span class=\"hljs-params\">sizePar, data</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    :param sizePar: how many parity bits the message must have\n    :param data:  information bits\n    :return: message to be transmitted by unreliable medium\n            - bits of information merged with parity bits\n\n    &gt;&gt;&gt; emitterConverter(4, &quot;101010111111&quot;)\n    [&#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;0&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;]\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">if</span> sizePar + <span class=\"hljs-built_in\">len</span>(data) &lt;= <span class=\"hljs-number\">2</span> ** sizePar - (<span class=\"hljs-built_in\">len</span>(data) - <span class=\"hljs-number\">1</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;ERROR - size of parity don&#x27;t match with size of data&quot;</span>)\n        exit(<span class=\"hljs-number\">0</span>)\n\n    dataOut = []\n    parity = []\n    binPos = [<span class=\"hljs-built_in\">bin</span>(x)[<span class=\"hljs-number\">2</span>:] <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, sizePar + <span class=\"hljs-built_in\">len</span>(data) + <span class=\"hljs-number\">1</span>)]\n\n    <span class=\"hljs-comment\"># sorted information data for the size of the output data</span>\n    dataOrd = []\n    <span class=\"hljs-comment\"># data position template + parity</span>\n    dataOutGab = []\n    <span class=\"hljs-comment\"># parity bit counter</span>\n    qtdBP = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-comment\"># counter position of data bits</span>\n    contData = <span class=\"hljs-number\">0</span>\n\n    <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, sizePar + <span class=\"hljs-built_in\">len</span>(data) + <span class=\"hljs-number\">1</span>):\n        <span class=\"hljs-comment\"># Performs a template of bit positions - who should be given,</span>\n        <span class=\"hljs-comment\"># and who should be parity</span>\n        <span class=\"hljs-keyword\">if</span> qtdBP &lt; sizePar:\n            <span class=\"hljs-keyword\">if</span> (np.log(x) / np.log(<span class=\"hljs-number\">2</span>)).is_integer():\n                dataOutGab.append(<span class=\"hljs-string\">&quot;P&quot;</span>)\n                qtdBP = qtdBP + <span class=\"hljs-number\">1</span>\n            <span class=\"hljs-keyword\">else</span>:\n                dataOutGab.append(<span class=\"hljs-string\">&quot;D&quot;</span>)\n        <span class=\"hljs-keyword\">else</span>:\n            dataOutGab.append(<span class=\"hljs-string\">&quot;D&quot;</span>)\n\n        <span class=\"hljs-comment\"># Sorts the data to the new output size</span>\n        <span class=\"hljs-keyword\">if</span> dataOutGab[-<span class=\"hljs-number\">1</span>] == <span class=\"hljs-string\">&quot;D&quot;</span>:\n            dataOrd.append(data[contData])\n            contData += <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">else</span>:\n            dataOrd.append(<span class=\"hljs-literal\">None</span>)\n\n    <span class=\"hljs-comment\"># Calculates parity</span>\n    qtdBP = <span class=\"hljs-number\">0</span>  <span class=\"hljs-comment\"># parity bit counter</span>\n    <span class=\"hljs-keyword\">for</span> bp <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, sizePar + <span class=\"hljs-number\">1</span>):\n        <span class=\"hljs-comment\"># Bit counter one for a given parity</span>\n        contBO = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-comment\"># counter to control the loop reading</span>\n        contLoop = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> dataOrd:\n            <span class=\"hljs-keyword\">if</span> x <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-literal\">None</span>:\n                <span class=\"hljs-keyword\">try</span>:\n                    aux = (binPos[contLoop])[-<span class=\"hljs-number\">1</span> * (bp)]\n                <span class=\"hljs-keyword\">except</span> IndexError:\n                    aux = <span class=\"hljs-string\">&quot;0&quot;</span>\n                <span class=\"hljs-keyword\">if</span> aux == <span class=\"hljs-string\">&quot;1&quot;</span>:\n                    <span class=\"hljs-keyword\">if</span> x == <span class=\"hljs-string\">&quot;1&quot;</span>:\n                        contBO += <span class=\"hljs-number\">1</span>\n            contLoop += <span class=\"hljs-number\">1</span>\n        parity.append(contBO % <span class=\"hljs-number\">2</span>)\n\n        qtdBP += <span class=\"hljs-number\">1</span>\n\n    <span class=\"hljs-comment\"># Mount the message</span>\n    ContBP = <span class=\"hljs-number\">0</span>  <span class=\"hljs-comment\"># parity bit counter</span>\n    <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>, sizePar + <span class=\"hljs-built_in\">len</span>(data)):\n        <span class=\"hljs-keyword\">if</span> dataOrd[x] <span class=\"hljs-keyword\">is</span> <span class=\"hljs-literal\">None</span>:\n            dataOut.append(<span class=\"hljs-built_in\">str</span>(parity[ContBP]))\n            ContBP += <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">else</span>:\n            dataOut.append(dataOrd[x])\n\n    <span class=\"hljs-keyword\">return</span> dataOut\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">receptorConverter</span>(<span class=\"hljs-params\">sizePar, data</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    &gt;&gt;&gt; receptorConverter(4, &quot;1111010010111111&quot;)\n    ([&#x27;1&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;1&#x27;], True)\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-comment\"># data position template + parity</span>\n    dataOutGab = []\n    <span class=\"hljs-comment\"># Parity bit counter</span>\n    qtdBP = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-comment\"># Counter p data bit reading</span>\n    contData = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-comment\"># list of parity received</span>\n    parityReceived = []\n    dataOutput = []\n\n    <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-built_in\">len</span>(data) + <span class=\"hljs-number\">1</span>):\n        <span class=\"hljs-comment\"># Performs a template of bit positions - who should be given,</span>\n        <span class=\"hljs-comment\">#  and who should be parity</span>\n        <span class=\"hljs-keyword\">if</span> qtdBP &lt; sizePar <span class=\"hljs-keyword\">and</span> (np.log(x) / np.log(<span class=\"hljs-number\">2</span>)).is_integer():\n            dataOutGab.append(<span class=\"hljs-string\">&quot;P&quot;</span>)\n            qtdBP = qtdBP + <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">else</span>:\n            dataOutGab.append(<span class=\"hljs-string\">&quot;D&quot;</span>)\n\n        <span class=\"hljs-comment\"># Sorts the data to the new output size</span>\n        <span class=\"hljs-keyword\">if</span> dataOutGab[-<span class=\"hljs-number\">1</span>] == <span class=\"hljs-string\">&quot;D&quot;</span>:\n            dataOutput.append(data[contData])\n        <span class=\"hljs-keyword\">else</span>:\n            parityReceived.append(data[contData])\n        contData += <span class=\"hljs-number\">1</span>\n\n    <span class=\"hljs-comment\"># -----------calculates the parity with the data</span>\n    dataOut = []\n    parity = []\n    binPos = [<span class=\"hljs-built_in\">bin</span>(x)[<span class=\"hljs-number\">2</span>:] <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, sizePar + <span class=\"hljs-built_in\">len</span>(dataOutput) + <span class=\"hljs-number\">1</span>)]\n\n    <span class=\"hljs-comment\">#  sorted information data for the size of the output data</span>\n    dataOrd = []\n    <span class=\"hljs-comment\"># Data position feedback + parity</span>\n    dataOutGab = []\n    <span class=\"hljs-comment\"># Parity bit counter</span>\n    qtdBP = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-comment\"># Counter p data bit reading</span>\n    contData = <span class=\"hljs-number\">0</span>\n\n    <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, sizePar + <span class=\"hljs-built_in\">len</span>(dataOutput) + <span class=\"hljs-number\">1</span>):\n        <span class=\"hljs-comment\"># Performs a template position of bits - who should be given,</span>\n        <span class=\"hljs-comment\"># and who should be parity</span>\n        <span class=\"hljs-keyword\">if</span> qtdBP &lt; sizePar <span class=\"hljs-keyword\">and</span> (np.log(x) / np.log(<span class=\"hljs-number\">2</span>)).is_integer():\n            dataOutGab.append(<span class=\"hljs-string\">&quot;P&quot;</span>)\n            qtdBP = qtdBP + <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">else</span>:\n            dataOutGab.append(<span class=\"hljs-string\">&quot;D&quot;</span>)\n\n        <span class=\"hljs-comment\"># Sorts the data to the new output size</span>\n        <span class=\"hljs-keyword\">if</span> dataOutGab[-<span class=\"hljs-number\">1</span>] == <span class=\"hljs-string\">&quot;D&quot;</span>:\n            dataOrd.append(dataOutput[contData])\n            contData += <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">else</span>:\n            dataOrd.append(<span class=\"hljs-literal\">None</span>)\n\n    <span class=\"hljs-comment\"># Calculates parity</span>\n    qtdBP = <span class=\"hljs-number\">0</span>  <span class=\"hljs-comment\"># parity bit counter</span>\n    <span class=\"hljs-keyword\">for</span> bp <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, sizePar + <span class=\"hljs-number\">1</span>):\n        <span class=\"hljs-comment\"># Bit counter one for a certain parity</span>\n        contBO = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-comment\"># Counter to control loop reading</span>\n        contLoop = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> dataOrd:\n            <span class=\"hljs-keyword\">if</span> x <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-literal\">None</span>:\n                <span class=\"hljs-keyword\">try</span>:\n                    aux = (binPos[contLoop])[-<span class=\"hljs-number\">1</span> * (bp)]\n                <span class=\"hljs-keyword\">except</span> IndexError:\n                    aux = <span class=\"hljs-string\">&quot;0&quot;</span>\n                <span class=\"hljs-keyword\">if</span> aux == <span class=\"hljs-string\">&quot;1&quot;</span> <span class=\"hljs-keyword\">and</span> x == <span class=\"hljs-string\">&quot;1&quot;</span>:\n                    contBO += <span class=\"hljs-number\">1</span>\n            contLoop += <span class=\"hljs-number\">1</span>\n        parity.append(<span class=\"hljs-built_in\">str</span>(contBO % <span class=\"hljs-number\">2</span>))\n\n        qtdBP += <span class=\"hljs-number\">1</span>\n\n    <span class=\"hljs-comment\"># Mount the message</span>\n    ContBP = <span class=\"hljs-number\">0</span>  <span class=\"hljs-comment\"># Parity bit counter</span>\n    <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>, sizePar + <span class=\"hljs-built_in\">len</span>(dataOutput)):\n        <span class=\"hljs-keyword\">if</span> dataOrd[x] <span class=\"hljs-keyword\">is</span> <span class=\"hljs-literal\">None</span>:\n            dataOut.append(<span class=\"hljs-built_in\">str</span>(parity[ContBP]))\n            ContBP += <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">else</span>:\n            dataOut.append(dataOrd[x])\n\n    ack = parityReceived == parity\n    <span class=\"hljs-keyword\">return</span> dataOutput, ack\n\n\n<span class=\"hljs-comment\"># ---------------------------------------------------------------------</span>\n<span class=\"hljs-string\">&quot;&quot;&quot;\n# Example how to use\n\n# number of parity bits\nsizePari = 4\n\n# location of the bit that will be forced an error\nbe = 2\n\n# Message/word to be encoded and decoded with hamming\n# text = input(&quot;Enter the word to be read: &quot;)\ntext = &quot;Message01&quot;\n\n# Convert the message to binary\nbinaryText = text_to_bits(text)\n\n# Prints the binary of the string\nprint(&quot;Text input in binary is &#x27;&quot; + binaryText + &quot;&#x27;&quot;)\n\n# total transmitted bits\ntotalBits = len(binaryText) + sizePari\nprint(&quot;Size of data is &quot; + str(totalBits))\n\nprint(&quot;\\n --Message exchange--&quot;)\nprint(&quot;Data to send ------------&gt; &quot; + binaryText)\ndataOut = emitterConverter(sizePari, binaryText)\nprint(&quot;Data converted ----------&gt; &quot; + &quot;&quot;.join(dataOut))\ndataReceiv, ack = receptorConverter(sizePari, dataOut)\nprint(\n    &quot;Data receive ------------&gt; &quot;\n    + &quot;&quot;.join(dataReceiv)\n    + &quot;\\t\\t -- Data integrity: &quot;\n    + str(ack)\n)\n\n\nprint(&quot;\\n --Force error--&quot;)\nprint(&quot;Data to send ------------&gt; &quot; + binaryText)\ndataOut = emitterConverter(sizePari, binaryText)\nprint(&quot;Data converted ----------&gt; &quot; + &quot;&quot;.join(dataOut))\n\n# forces error\ndataOut[-be] = &quot;1&quot; * (dataOut[-be] == &quot;0&quot;) + &quot;0&quot; * (dataOut[-be] == &quot;1&quot;)\nprint(&quot;Data after transmission -&gt; &quot; + &quot;&quot;.join(dataOut))\ndataReceiv, ack = receptorConverter(sizePari, dataOut)\nprint(\n    &quot;Data receive ------------&gt; &quot;\n    + &quot;&quot;.join(dataReceiv)\n    + &quot;\\t\\t -- Data integrity: &quot;\n    + str(ack)\n)\n&quot;&quot;&quot;</span>\n"
    }
  },
  "contributors": [
    {
      "name": "matkosoric",
      "email": "soric.matko@gmail.com",
      "commits": 1
    },
    {
      "name": "João Gustavo A. Amorim",
      "email": "joaogustavoamorim@gmail.com",
      "commits": 1
    },
    {
      "name": "onlinejudge95",
      "email": "44158581+onlinejudge95@users.noreply.github.com",
      "commits": 2
    },
    {
      "name": "Christian Clauss",
      "email": "cclauss@me.com",
      "commits": 4
    }
  ],
  "explanationUrl": {}
}
